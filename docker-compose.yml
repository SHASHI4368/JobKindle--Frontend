# version: '3.8'
# services:
#   nextjs-app:
#     build: .
#     image: jobkindle-frontend:latest
#     container_name: jobkindle-frontend
#     ports:
#       - "3001:3001"
#     env_file:
#       - /opt/jobkindle-frontend/.env
#     restart: unless-stopped
#     networks:
#       - jobkindle-network

#   nginx:
#     image: nginx:alpine
#     container_name: jobkindle-nginx
#     ports:
#       - "80:80"
#       - "443:443"
#     volumes:
#       - ./nginx.conf:/etc/nginx/nginx.conf:ro
#       - /etc/letsencrypt/live/jobkindle.site/fullchain.pem:/etc/ssl/certs/jobkindle.site.crt:ro
#       - /etc/letsencrypt/live/jobkindle.site/privkey.pem:/etc/ssl/private/jobkindle.site.key:ro
#     depends_on:
#       - nextjs-app
#     restart: unless-stopped
#     networks:
#       - jobkindle-network

# networks:
#   jobkindle-network:
#     driver: bridge


version: '3.8'
services:
  nextjs-app:
    build: .
    image: jobkindle-frontend:local
    container_name: jobkindle-frontend-local
    ports:
      - "3001:3001"
    env_file:
      - .env
    restart: unless-stopped
    networks:
      - jobkindle-local

  nginx:
    image: nginx:alpine
    container_name: jobkindle-nginx-local
    ports:
      - "8080:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - nextjs-app
    restart: unless-stopped
    networks:
      - jobkindle-local

networks:
  jobkindle-local:
    driver: bridge